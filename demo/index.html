<!DOCTYPE HTML>
<html>

<head>
  <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
	<!--
	<script type="text/javascript" src='../ice-master.min.js'></script>
	-->
	<script type="text/javascript" src='../lib/rangy/rangy-core.js'></script>
	<script type="text/javascript" src='../src/polyfills.js'></script>
	<script type="text/javascript" src='../src/ice.js'></script>
	<script type="text/javascript" src='../src/dom.js'></script>
	<script type="text/javascript" src='../src/icePlugin.js'></script>
	<script type="text/javascript" src='../src/icePluginManager.js'></script>
	<script type="text/javascript" src='../src/bookmark.js'></script>
	<script type="text/javascript" src='../src/selection.js'></script>
	<script type="text/javascript" src='../src/plugins/IceAddTitlePlugin/IceAddTitlePlugin.js'></script>
	<script type="text/javascript" src='../src/plugins/IceCopyPastePlugin/IceCopyPastePlugin.js'></script>
	<script type="text/javascript" src='../src/plugins/IceEmdashPlugin/IceEmdashPlugin.js'></script>
	<script type="text/javascript" src='../src/plugins/IceSmartQuotesPlugin/IceSmartQuotesPlugin.js'></script>
	<script type="text/javascript" src="../lib/tinymce/js/tinymce/tinymce.js"></script>
	<link rel="stylesheet" href="demo.css" type="text/css" media="screen" />

</head>

<body>
	<div class="container">
	
		<h1>Ice Demo</h1>
	
		<p>
			Ice is a track changes implementation, built in javascript, for anything that is contenteditable on the web. The following are demos of Ice in action. You can check out the code on <a href="https://github.com/NYTimes/ice">github</a>.
		</p>

		<h3>Tinymce Plugin</h3>
		<p>
			With tinymce handling the text editing, Ice can initialize and operate in a more configurable editing environment. Notice, the last six buttons in the toolbar can be toggled to modify changes or the state of Ice. In addition, this example shows off the ease in customizing and plugging in styles for tracking tags with a highlighter style contributed by Andrew Ozz at Wordpress. Since Andrew's style only uses two colors, one for inserts and one for deletes, you can hover over changes to get a title popup with more information about the user for a change.
		</p>

		<div class="editor">
			<div class="control">
				<strong>Set User:</strong>
				<select onchange="setUserMCE(this)">	
					<option data-userid="11" data-username="Geoffrey Jellineck">Geoffrey Jellineck</option>
					<option data-userid="22" data-username="Chuck Noblet">Chuck Noblet</option>
					<option data-userid="33" data-username="Jerri Blank">Jerri Blank</option>
				</select>
			</div>
			<div id="content">
				<div id="tinymce-wrapper">
					<textarea id="tinymce" style="width: 100%">
						<p style="margin-top: 0pt; margin-bottom: 0pt; text-align: justify; widows: 0; orphans: 0; font-size: 12pt;" data-mce-style="margin-top: 0pt; margin-bottom: 0pt; text-align: justify; widows: 0; orphans: 0; font-size: 12pt;">
							<span style="font-family: Arial; letter-spacing: -0.15pt; display: none;" data-mce-style="font-family: Arial; letter-spacing: -0.15pt; display: none;">NOTE:&nbsp; paragraph definition:</span>
							<span style="font-family: Arial; letter-spacing: -0.15pt; display: none;" data-mce-style="font-family: Arial; letter-spacing: -0.15pt; display: none;">Level 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Level 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Level 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Level 4</span>
							<span style="font-family: Arial; letter-spacing: -0.15pt;" data-mce-style="font-family: Arial; letter-spacing: -0.15pt;">
								<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">April&nbsp;27,&nbsp;2017</span>
								<span class="del cts-5" title="Deleted by guest@twentyfour.com - 04/27/2017 11:00am" data-cid="25" data-userid="856" data-username="guest@twentyfour.com" data-time="1493283634890">&nbsp;beautifull&nbsp;document</span>
							</span>
						</p>
						<p style="margin-top: 0pt; margin-bottom: 0pt; text-align: justify; widows: 0; orphans: 0; font-size: 12pt;" data-mce-style="margin-top: 0pt; margin-bottom: 0pt; text-align: justify; widows: 0; orphans: 0; font-size: 12pt;">
						<span style="font-family: Arial; letter-spacing: -0.15pt;" data-mce-style="font-family: Arial; letter-spacing: -0.15pt;">
							<span class="ins cts-2" title="Inserted by thy1 - 04/27/2017 10:37am" data-cid="5" data-userid="90" data-username="thy1" data-time="1493282268051">
								<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">Employment&nbsp;</span>
								<span class="del cts-1" title="Deleted by guest@one.com - 04/27/2017 11:35am" data-cid="29" data-userid="877" data-username="guest@one.com" data-time="1493285746249">employement</span>
								<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;</span>
								<span class="del cts-1" title="Deleted by guest@one.com - 04/27/2017 11:35am" data-cid="35" data-userid="877" data-username="guest@one.com" data-time="1493285750704">employment</span>
							</span>
						</span>
						<span style="font-family: Arial; letter-spacing: -0.15pt;" data-mce-style="font-family: Arial; letter-spacing: -0.15pt;">
							<span class="ins cts-3" title="Inserted by guest@two.com - 04/27/2017 10:56am" data-cid="3" data-userid="854" data-username="guest@two.com" data-time="1493283364079">
								<span class="del cts-1" title="Deleted by guest@one.com - 04/27/2017 11:35am" data-cid="35" data-userid="877" data-username="guest@one.com" data-time="1493285750704">Employment</span>
								<span class="ins cts-4" title="Inserted by guest@seventeen.com - 04/27/2017 10:58am" data-cid="27" data-userid="855" data-username="guest@seventeen.com" data-time="1493283527562">
									<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;will&nbsp;</span>
									<span class="ins cts-5" title="Inserted by guest@twentyfour.com - 04/27/2017 11:00am" data-cid="54" data-userid="856" data-username="guest@twentyfour.com" data-time="1493283657835">
										<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">may</span>
										<span class="ins cts-6" title="Inserted by guest@twentythree.com - 04/27/2017 11:05am" data-cid="19" data-userid="857" data-username="guest@twentythree.com" data-time="1493283914037">
											<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;be</span>
											<span class="ins cts-7" title="Inserted by guest@twentytwo.com - 04/27/2017 11:07am" data-cid="2" data-userid="858" data-username="guest@twentytwo.com" data-time="1493284037370">
												<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;terminated</span>
												<span class="ins cts-8" title="Inserted by guest@twentyone.com - 04/27/2017 11:09am" data-cid="4" data-userid="859" data-username="guest@twentyone.com" data-time="1493284148353">
													<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;with</span>
													<span class="ins cts-9" title="Inserted by guest@twenty.com - 04/27/2017 11:11am" data-cid="12" data-userid="860" data-username="guest@twenty.com" data-time="1493284260821">
														<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;or&nbsp;without</span>
														<span class="ins cts-10" title="Inserted by guest@eighteen.com - 04/27/2017 11:14am" data-cid="6" data-userid="861" data-username="guest@eighteen.com" data-time="1493284496682">
															<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;cause&nbsp;and</span>
															<span class="ins cts-11" title="Inserted by guest@nineteen.com - 04/27/2017 11:16am" data-cid="7" data-userid="862" data-username="guest@nineteen.com" data-time="1493284566927">
																<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;with&nbsp;or&nbsp;without</span>
																<span class="ins cts-12" title="Inserted by guest@sixteen.com - 04/27/2017 11:19am" data-cid="8" data-userid="863" data-username="guest@sixteen.com" data-time="1493284758609">
																	<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;notice&nbsp;at</span>
																	<span class="ins cts-1" title="Inserted by guest@fifteen.com - 04/27/2017 11:20am" data-cid="9" data-userid="864" data-username="guest@fifteen.com" data-time="1493284806895">
																		<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;any&nbsp;time</span>
																		<span class="ins cts-2" title="Inserted by guest@fourteen.com - 04/27/2017 11:23am" data-cid="11" data-userid="865" data-username="guest@fourteen.com" data-time="1493284989846">
																			<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;at&nbsp;the&nbsp;will</span>
																		</span>
																		<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;</span>
																		<span class="ins cts-3" title="Inserted by guest@thirteen.com - 04/27/2017 11:24am" data-cid="13" data-userid="866" data-username="guest@thirteen.com" data-time="1493285088114">
																			<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">of&nbsp;either&nbsp;you</span>
																			<span class="ins cts-4" title="Inserted by guest@twelve.com - 04/27/2017 11:25am" data-cid="14" data-userid="867" data-username="guest@twelve.com" data-time="1493285134712">
																				<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;or&nbsp;the&nbsp;company</span>
																				<span class="ins cts-5" title="Inserted by guest@eleven.com - 04/27/2017 11:26am" data-cid="16" data-userid="868" data-username="guest@eleven.com" data-time="1493285188939">
																					<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">.&nbsp;Terms&nbsp;and&nbsp;conditions</span>
																					<span class="ins cts-6" title="Inserted by guest@ten.com - 04/27/2017 11:27am" data-cid="43" data-userid="869" data-username="guest@ten.com" data-time="1493285267504">
																						<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;of&nbsp;employment</span>
																						<span class="ins cts-7" title="Inserted by guest@nine.com - 04/27/2017 11:28am" data-cid="18" data-userid="870" data-username="guest@nine.com" data-time="1493285319070">
																							<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;with&nbsp;the&nbsp;co</span>
																							<span class="ins cts-12" title="Inserted by guest@three.com - 04/27/2017 11:35am" data-cid="28" data-userid="876" data-username="guest@three.com" data-time="1493285712384">
																								<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">mpany</span>
																							</span>
																							<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">mpany</span>
																							<span class="ins cts-8" title="Inserted by guest@eigh.com - 04/27/2017 11:29am" data-cid="20" data-userid="871" data-username="guest@eigh.com" data-time="1493285380297">
																								<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;m</span>
																								<span class="ins cts-11" title="Inserted by guest@four.com - 04/27/2017 11:34am" data-cid="26" data-userid="875" data-username="guest@four.com" data-time="1493285662149">
																									<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">and&nbsp;the&nbsp;company&nbsp;</span>
																								</span>
																								<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">ay&nbsp;be&nbsp;notified</span>
																								<span class="ins cts-9" title="Inserted by guest@seven.com - 04/27/2017 11:31am" data-cid="38" data-userid="872" data-username="guest@seven.com" data-time="1493285479938">
																									<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;at&nbsp;the&nbsp;sole</span>
																									<span class="ins cts-10" title="Inserted by guest@six.com - 04/27/2017 11:32am" data-cid="15" data-userid="873" data-username="guest@six.com" data-time="1493285536428">
																										<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;discretion&nbsp;fo&nbsp;the&nbsp;company</span>
																									</span>
																								</span>
																							</span>
																						</span>
																					</span>
																				</span>
																			</span>
																		</span>
																	</span>
																</span>
															</span>
														</span>
													</span>
												</span>
											</span>
										</span>
									</span>
								</span>
							</span>
						</span>
						<span style="font-family: Arial;" data-mce-style="font-family: Arial;">
							<span class="ins cts-6" title="Inserted by guest@ten.com - 04/27/2017 11:27am" data-cid="17" data-userid="869" data-username="guest@ten.com" data-time="1493285258287">
								<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">&nbsp;</span>
								<span class="ins cts-10" title="Inserted by guest@five.com - 04/27/2017 11:33am" data-cid="24" data-userid="874" data-username="guest@five.com" data-time="1493285624112">
									<span class="del cts-2" data-cid="42" data-userid="35" data-username="thibaut" data-time="1493295881311" title="Deleted by thibaut - 04/27/2017 2:24pm">and&nbsp;the&nbsp;company</span>
								</span>
							</span>
						</span>
						</p>
						<p>
							<span class="del cts-1" data-cid="2" data-userid="33" data-username="Jerri Blank" data-time="1326764311895" title="Deleted by Jerri Blank - 01/16/2012 8:38pm">BBrooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn <b>Brooklyn</b> Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn rooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn </span><img src="standford_logo.png">
						</p>
						<p>
							<ul>
								<li>one</li>
								<li><span class="del cts-1" data-cid="3" data-userid="33" data-username="Jerri Blank" data-time="1326764319303" title="Inserted by Jerri Blank - 01/16/2012 8:38pm">Kings Point</span></li>
								<li>three</li>
							</ul>
						</p>
						<p>
							<span class="del cts-1" data-cid="2" data-userid="33" data-username="Jerri Blank" data-time="1326764311895" title="Deleted by Jerri Blank - 01/16/2012 8:38pm">BBrooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn <bold>Brooklyn</bold> Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn rooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn Brooklyn </span><span class="ins cts-1" data-cid="3" data-userid="33" data-username="Jerri Blank" data-time="1326764319303" title="Inserted by Jerri Blank - 01/16/2012 8:38pm">Kings Point</span>
						</p>
						<p>
							<span class="ins cts-1" data-cid="3" data-userid="33" data-username="Jerri Blank" data-time="1326764319303" title="Inserted by Jerri Blank - 01/16/2012 8:38pm">Kings Point</span>
							, N.Y. &mdash; Adam Katz is happy to talk to reporters when he is promoting his business, a charter flight company based on Long Island called Talon Air.
						</p>
						<p>
							But when the subject was his position as one of America's top earners, he <img src="standford_logo.png">
							<span class="del cts-1" data-cid="23" data-userid="33" data-username="Jerri Blank" data-time="1326765043953" title="Deleted by Jerri Blank - 01/16/2012 8:50pm">hesitated</span>
							<span class="ins cts-1" data-cid="24" data-userid="33" data-username="Jerri Blank" data-time="1326765049283" title="Inserted by Jerri Blank - 01/16/2012 8:50pm">balked</span>
							. Seated at a desk fashioned from a jet fuel cell
							<span title="Inserted by Geoffrey Jellineck - 01/16/2012 8:42pm" data-time="1326764560331" data-username="Geoffrey Jellineck" data-userid="11" data-cid="20" class="ins cts-3">, wearing a button-down shirt with the company logo,</span>
							he considered the public relations benefits and found them lacking: "It's not very popular to be in the 1 percent these days, is it?"
						</p>
						<img src="standford_logo.png">
						<p>
							<span class="ins cts-2" data-cid="14" data-userid="22" data-username="Chuck Noblet" data-time="1326764402035" title="Inserted by Chuck Noblet - 01/16/2012 8:40pm">A few months ago, Mr. Katz was just a successful businessman with 
								<span class="del cts-3" data-cid="15" data-userid="11" data-username="Geoffrey Jellineck" data-time="1326764492624" title="Deleted by Geoffrey Jellineck - 01/16/2012 8:41pm">four</span>
								<span class="ins cts-3" data-cid="16" data-userid="11" data-username="Geoffrey Jellineck" data-time="1326764495239" title="Inserted by Geoffrey Jellineck - 01/16/2012 8:41pm">five</span>
								children, an $8 million home, a family real estate company in Manhattan and his passion, 10-year-old Talon Air.</span>
						</p>
						<p>Now, the colossal gap between the very rich and everyone else 
							<span title="Inserted by Geoffrey Jellineck - 01/16/2012 8:46pm" data-time="1326764809499" data-username="Geoffrey Jellineck" data-userid="11" data-cid="22" class="ins cts-3">&mdash; the 1 percent versus the 99 percent &mdash; </span>
							has become a rallying point in this election season. As President Obama positions himself as a defender of the middle class, and Mitt Romney, the wealthiest of the Republican presidential candidates, decries such talk as "the bitter politics of envy," Mr. Katz has found himself on the wrong end of a new paradigm.
						</p>
					</textarea>
				</div>
			</div>
		</div>

		<script type="text/javascript">

		tinymce.init({
			mode: "exact",
			elements: "tinymce",
			theme: "modern",
			plugins: 'ice,icesearchreplace',
			theme_advanced_buttons1: "bold,italic,underline,|,bullist,numlist,|,undo,redo,code,|,search,replace,|,ice_togglechanges,ice_toggleshowchanges,iceacceptall,icerejectall,iceaccept,icereject",
			theme_advanced_buttons2: "",
			theme_advanced_buttons3: "",
			theme_advanced_buttons4: "",
			theme_advanced_toolbar_location: "top",
			theme_advanced_toolbar_align: "left",
			extended_valid_elements: "p,span[*],delete[*],insert[*]",
			ice: {
				user: { name: 'Geoffrey Jellineck', id: 11},
				preserveOnPaste: 'p,a[href],i,em,b,span',
				deleteTag: 'delete',
				insertTag: 'insert',
				mergeBlocks: false,
				styleColorsNumber: 1
			},
			height: '400'
		});
		
		function setUserMCE(el) {
			var name = $(el).find(':selected').data('username');
			var id = $(el).find(':selected').data('userid');
			tinymce.execCommand('ice_changeuser', {id: id, name: name});
		}
		
		</script>

	</div>
	</body>
</html>
