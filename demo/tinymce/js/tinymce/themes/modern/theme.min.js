tinymce.ThemeManager.add("modern",function(e){function t(){function t(t){var i,a=[];if(t)return l(t.split(/[ ,]/),function(t){function n(){var n=e.selection;"bullist"==r&&n.selectorChanged("ul > li",function(e,n){for(var i,a=n.parents.length;a--&&(i=n.parents[a].nodeName,"OL"!=i&&"UL"!=i););t.active("UL"==i)}),"numlist"==r&&n.selectorChanged("ol > li",function(e,n){for(var i,a=n.parents.length;a--&&(i=n.parents[a].nodeName,"OL"!=i&&"UL"!=i););t.active("OL"==i)}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var r;"|"==t?i=null:c.has(t)?(t={type:t},s.toolbar_items_size&&(t.size=s.toolbar_items_size),a.push(t),i=null):(i||(i={type:"buttongroup",items:[]},a.push(i)),e.buttons[t]&&(r=t,t=e.buttons[r],t.type=t.type||"button",s.toolbar_items_size&&(t.size=s.toolbar_items_size),t=c.create(t),i.items.push(t),e.initialized?n():e.on("init",n)))}),n.push({type:"toolbar",layout:"flow",items:a}),!0}for(var n=[],i=1;10>i&&t(s["toolbar"+i]);i++);return n.length||t(s.toolbar||d),n}function n(){function t(t){var n;return"|"==t?{text:"|"}:n=e.menuItems[t]}function n(n){var i,a,r,o;if(s.menu?(a=s.menu[n],o=!0):a=m[n],a){i={text:a.title},r=[],l((a.items||"").split(/[ ,]/),function(e){var n=t(e);n&&r.push(t(e))}),o||l(e.menuItems,function(e){e.context==n&&("before"==e.separator&&r.push({text:"|"}),e.prependToContext?r.unshift(e):r.push(e),"after"==e.separator&&r.push({text:"|"}))});for(var c=0;r.length>c;c++)"|"==r[c].text&&(0===c||c==r.length-1)&&r.splice(c,1);if(i.menu=r,!i.menu.length)return null}return i}var i=[],a=s.menubar?tinymce.makeMap(s.menubar,/[ ,]/):!1;for(var r in m)(!a||a[r])&&(r=n(r),r&&i.push(r));return i}function i(t){function n(e){var n=t.find(e)[0];n&&n.focus()}e.shortcuts.add("Alt+F9","",function(){n("menubar")}),e.shortcuts.add("Alt+F10","",function(){n("toolbar")}),e.shortcuts.add("Alt+F11","",function(){n("elementpath")}),t.on("cancel",function(){e.focus()})}function a(){function a(){if(d&&d.visible()){var t=u.getPos(e.getBody());d.moveTo(t.x,t.y-d.layoutRect().h)}}function r(){d&&(d.show(),a(),u.addClass(e.getBody(),"mce-edit-focus"))}function l(){d&&(d.hide(),u.removeClass(e.getBody(),"mce-edit-focus"),document.activeElement&&-1==document.activeElement.className.indexOf("mce-content-body")&&u.setStyle(document.body,"padding-top",0))}function m(){return d?(d.visible()||r(),e.focus(),void 0):(d=o.panel=c.create({type:"floatpanel",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",autohide:!1,border:1,items:[s.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},{type:"panel",name:"toolbar",layout:"stack",items:t()}]}),d.renderTo(document.body).reflow(),i(d),r(),e.on("nodeChange",a),e.on("activate",r),e.on("deactivate",l),e.on("focusout",function(){setTimeout(function(){for(var e=document.activeElement;e;){if(1==e.nodeType&&-1!=e.className.indexOf("mce-")&&-1===e.className.indexOf("mce-content-body"))return;e=e.parentNode}l()},0)}),e.focus(),void 0)}var d;return s.content_editable=!0,e.on("focusin",m),e.on("remove",function(){d.remove(),d=null}),{}}function r(a){var r;return r=o.panel=c.create({type:"panel",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[s.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},{type:"panel",layout:"stack",items:t()},{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),s.statusbar!==!1&&r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",items:[{type:"elementpath"},s.resize!==!1?{type:"resizehandle",editor:e}:null]}),r.renderBefore(a.targetNode).reflow(),e.on("remove",function(){r.remove(),r=null}),i(r),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}}var o=this,s=e.settings,c=tinymce.ui.Factory,l=tinymce.each,u=tinymce.DOM,m={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},d="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";o.renderUI=function(t){var n=s.skin!==!1?s.skin||"lightgray":!1;return n&&(tinymce.Env.ie&&7>=tinymce.Env.ie?tinymce.DOM.loadCSS(tinymce.baseURL+"/skins/"+n+"/skin.ie7.min.css"):tinymce.DOM.loadCSS(tinymce.baseURL+"/skins/"+n+"/skin.min.css"),e.contentCSS.push(tinymce.baseURL+"/skins/"+n+"/content.min.css")),e.on("ProgressState",function(e){o.throbber=o.throbber||new tinymce.ui.Throbber(o.panel.getEl("body")),e.state?o.throbber.show(e.time):o.throbber.hide()}),s.inline?a(t):r(t)}});