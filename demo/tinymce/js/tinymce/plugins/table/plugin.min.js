(function(e,t){"use strict";function n(e,t){for(var n,o=[],r=0;e.length>r;++r){if(n=i[e[r]]||l(e[r]),!n)throw"module definition dependecy not found: "+e[r];o.push(n)}t.apply(null,o)}function o(e,o,r){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(o===t)throw"invalid module definition, dependencies must be specified";if(r===t)throw"invalid module definition, definition function must be specified";n(o,function(){i[e]=r.apply(null,arguments)})}function r(e){return!!i[e]}function l(t){for(var n=e,o=t.split(/[.\/]/),r=0;o.length>r;++r){if(!n[o[r]])return;n=n[o[r]]}return n}function a(n){for(var o=0;n.length>o;o++){for(var r=e,l=n[o],a=l.split(/[.\/]/),c=0;a.length-1>c;++c)r[a[c]]===t&&(r[a[c]]={}),r=r[a[c]];r[a[a.length-1]]=i[l]}}var i={},c="tinymce/tableplugin/TableGrid",s="tinymce/util/Tools",d="tinymce/Env",u="tinymce/tableplugin/Quirks",f="tinymce/util/VK",m="tinymce/tableplugin/CellSelection",g="tinymce/dom/TreeWalker",p="tinymce/tableplugin/Plugin",h="tinymce/PluginManager";o(c,[s,d],function(e,n){function o(e,t){return parseInt(e.getAttribute(t)||1,10)}var r=e.each;return function(l,a){function i(){var e=0;I=[],r(["thead","tbody","tfoot"],function(t){var n=E.select("> "+t+" tr",a);r(n,function(n,l){l+=e,r(E.select("> td, > th",n),function(e,n){var r,a,i,c;if(I[l])for(;I[l][n];)n++;for(i=o(e,"rowspan"),c=o(e,"colspan"),a=l;l+i>a;a++)for(I[a]||(I[a]=[]),r=n;n+c>r;r++)I[a][r]={part:t,real:a==l&&r==n,elm:e,rowspan:i,colspan:c}})}),e+=n.length})}function c(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function s(e,n){var o;return o=I[n],o?o[e]:t}function d(e,t,n){e&&(n=parseInt(n,10),1===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function u(e){return e&&(E.hasClass(e.elm,"mce-item-selected")||e==D)}function f(){var e=[];return r(a.rows,function(n){r(n.cells,function(o){return E.hasClass(o,"mce-item-selected")||o==D.elm?(e.push(n),!1):t})}),e}function m(){var e=E.createRng();e.setStartAfter(a),e.setEndAfter(a),l.setRng(e),E.remove(a)}function g(o){var l;return e.walk(o,function(e){var a;return 3==e.nodeType?(r(E.getParents(e.parentNode,null,o).reverse(),function(e){e=c(e,!1),l?a&&a.appendChild(e):l=a=e,a=e}),a&&(a.innerHTML=n.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):t},"childNodes"),o=c(o,!1),d(o,"rowSpan",1),d(o,"colSpan",1),l?o.appendChild(l):n.ie||(o.innerHTML='<br data-mce-bogus="1" />'),o}function p(){var e=E.createRng(),n;return r(E.select("tr",a),function(e){0===e.cells.length&&E.remove(e)}),0===E.select("tr",a).length?(e.setStartAfter(a),e.setEndAfter(a),l.setRng(e),E.remove(a),t):(r(E.select("thead,tbody,tfoot",a),function(e){0===e.rows.length&&E.remove(e)}),i(),n=I[Math.min(I.length-1,k.y)],n&&(l.select(n[Math.min(n.length-1,k.x)].elm,!0),l.collapse(!0)),t)}function h(e,t,n,o){var r,l,a,i,c;for(r=I[t][e].elm.parentNode,a=1;n>=a;a++)if(r=E.getNext(r,"tr")){for(l=e;l>=0;l--)if(c=I[t+a][l].elm,c.parentNode==r){for(i=1;o>=i;i++)E.insertAfter(g(c),c);break}if(-1==l)for(i=1;o>=i;i++)r.insertBefore(g(r.cells[0]),r.cells[0])}}function b(){r(I,function(e,t){r(e,function(e,n){var r,l,a;if(u(e)&&(e=e.elm,r=o(e,"colspan"),l=o(e,"rowspan"),r>1||l>1)){for(d(e,"rowSpan",1),d(e,"colSpan",1),a=0;r-1>a;a++)E.insertAfter(g(e),e);h(n,t,l-1,r)}})})}function v(t,n,o){var l,a,c,f,m,g,h,v,w,x,y;if(t?(l=P(t),a=l.x,c=l.y,f=a+(n-1),m=c+(o-1)):(k=M=null,r(I,function(e,t){r(e,function(e,n){u(e)&&(k||(k={x:n,y:t}),M={x:n,y:t})})}),a=k.x,c=k.y,f=M.x,m=M.y),v=s(a,c),w=s(f,m),v&&w&&v.part==w.part){for(b(),i(),v=s(a,c).elm,d(v,"colSpan",f-a+1),d(v,"rowSpan",m-c+1),h=c;m>=h;h++)for(g=a;f>=g;g++)I[h]&&I[h][g]&&(t=I[h][g].elm,t!=v&&(x=e.grep(t.childNodes),r(x,function(e){v.appendChild(e)}),x.length&&(x=e.grep(v.childNodes),y=0,r(x,function(e){"BR"==e.nodeName&&E.getAttrib(e,"data-mce-bogus")&&y++<x.length-1&&v.removeChild(e)})),E.remove(t)));p()}}function w(e){var n,l,a,i,s,f,m,p,h;for(r(I,function(o,l){return r(o,function(o){return u(o)&&(o=o.elm,s=o.parentNode,f=c(s,!1),n=l,e)?!1:t}),e?!n:t}),i=0;I[0].length>i;i++)if(I[n][i]&&(l=I[n][i].elm,l!=a)){if(e){if(n>0&&I[n-1][i]&&(p=I[n-1][i].elm,h=o(p,"rowSpan"),h>1)){d(p,"rowSpan",h+1);continue}}else if(h=o(l,"rowspan"),h>1){d(l,"rowSpan",h+1);continue}m=g(l),d(m,"colSpan",l.colSpan),f.appendChild(m),a=l}f.hasChildNodes()&&(e?s.parentNode.insertBefore(f,s):E.insertAfter(f,s))}function x(e){var n,l;r(I,function(o){return r(o,function(o,r){return u(o)&&(n=r,e)?!1:t}),e?!n:t}),r(I,function(t,r){var a,i,c;t[n]&&(a=t[n].elm,a!=l&&(c=o(a,"colspan"),i=o(a,"rowspan"),1==c?e?(a.parentNode.insertBefore(g(a),a),h(n,r,i-1,c)):(E.insertAfter(g(a),a),h(n,r,i-1,c)):d(a,"colSpan",a.colSpan+1),l=a))})}function y(){var t=[];r(I,function(n){r(n,function(n,l){u(n)&&-1===e.inArray(t,l)&&(r(I,function(e){var t=e[l].elm,n;n=o(t,"colSpan"),n>1?d(t,"colSpan",n-1):E.remove(t)}),t.push(l))})}),p()}function C(){function e(e){var t,n,l;t=E.getNext(e,"tr"),r(e.cells,function(e){var t=o(e,"rowSpan");t>1&&(d(e,"rowSpan",t-1),n=P(e),h(n.x,n.y,1,1))}),n=P(e.cells[0]),r(I[n.y],function(e){var t;e=e.elm,e!=l&&(t=o(e,"rowSpan"),1>=t?E.remove(e):d(e,"rowSpan",t-1),l=e)})}var t;t=f(),r(t.reverse(),function(t){e(t)}),p()}function R(){var e=f();return E.remove(e),p(),e}function N(){var e=f();return r(e,function(t,n){e[n]=c(t,!0)}),e}function T(e,n){var o=f(),l=o[n?0:o.length-1],a=l.cells.length;e&&(r(I,function(e){var n;return a=0,r(e,function(e){e.real&&(a+=e.colspan),e.elm.parentNode==l&&(n=1)}),n?!1:t}),n||e.reverse(),r(e,function(e){var t,o=e.cells.length,r;for(t=0;o>t;t++)r=e.cells[t],d(r,"colSpan",1),d(r,"rowSpan",1);for(t=o;a>t;t++)e.appendChild(g(e.cells[o-1]));for(t=a;o>t;t++)E.remove(e.cells[t]);n?l.parentNode.insertBefore(e,l):E.insertAfter(e,l)}),E.removeClass(E.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function P(e){var n;return r(I,function(o,l){return r(o,function(o,r){return o.elm==e?(n={x:r,y:l},!1):t}),!n}),n}function S(e){k=P(e)}function A(){var e,t;return e=t=0,r(I,function(n,o){r(n,function(n,r){var l,a;u(n)&&(n=I[o][r],r>e&&(e=r),o>t&&(t=o),n.real&&(l=n.colspan-1,a=n.rowspan-1,l&&r+l>e&&(e=r+l),a&&o+a>t&&(t=o+a)))})}),{x:e,y:t}}function B(e){var t,n,o,r,l,a,i,c,s,d;if(M=P(e),k&&M){for(t=Math.min(k.x,M.x),n=Math.min(k.y,M.y),o=Math.max(k.x,M.x),r=Math.max(k.y,M.y),l=o,a=r,d=n;a>=d;d++)e=I[d][t],e.real||t>t-(e.colspan-1)&&(t-=e.colspan-1);for(s=t;l>=s;s++)e=I[n][s],e.real||n>n-(e.rowspan-1)&&(n-=e.rowspan-1);for(d=n;r>=d;d++)for(s=t;o>=s;s++)e=I[d][s],e.real&&(i=e.colspan-1,c=e.rowspan-1,i&&s+i>l&&(l=s+i),c&&d+c>a&&(a=d+c));for(E.removeClass(E.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),d=n;a>=d;d++)for(s=t;l>=s;s++)I[d][s]&&E.addClass(I[d][s].elm,"mce-item-selected")}}var I,k,M,D,E=l.dom;a=a||E.getParent(l.getNode(),"table"),i(),D=E.getParent(l.getStart(),"th,td"),D&&(k=P(D),M=A(),D=s(k.x,k.y)),e.extend(this,{deleteTable:m,split:b,merge:v,insertRow:w,insertCol:x,deleteCols:y,deleteRows:C,cutRows:R,copyRows:N,pasteRows:T,getPos:P,setStartCell:S,setEndCell:B})}}),o(u,[f,d,s],function(e,n,o){function r(e,t){return parseInt(e.getAttribute(t)||1,10)}var l=o.each;return function(o){function a(){function n(n){function a(e,t){var r=e?"previousSibling":"nextSibling",l=o.dom.getParent(t,"tr"),a=l[r];if(a)return b(o,t,a,e),n.preventDefault(),!0;var c=o.dom.getParent(l,"table"),u=l.parentNode,f=u.nodeName.toLowerCase();if("tbody"===f||f===(e?"tfoot":"thead")){var m=i(e,c,u,"tbody");if(null!==m)return s(e,m,t)}return d(e,l,r,c)}function i(e,t,n,r){var l=o.dom.select(">"+r,t),a=l.indexOf(n);if(e&&0===a||!e&&a===l.length-1)return c(e,t);if(-1===a){var i="thead"===n.tagName.toLowerCase()?0:l.length-1;return l[i]}return l[a+(e?-1:1)]}function c(e,t){var n=e?"thead":"tfoot",r=o.dom.select(">"+n,t);return 0!==r.length?r[0]:null}function s(e,t,r){var l=u(t,e);return l&&b(o,r,l,e),n.preventDefault(),!0}function d(e,t,r,l){var i=l[r];if(i)return f(i),!0;var c=o.dom.getParent(l,"td,th");if(c)return a(e,c,n);var s=u(t,!e);return f(s),n.preventDefault(),!1}function u(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?o.dom.getParent(n,"td,th"):n}function f(e){o.selection.setCursorLocation(e,0)}function m(){return x==e.UP||x==e.DOWN}function g(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function p(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=r(n,"colspan");return t}function h(e,n){var o=0,a=0;return l(e.children,function(e,l){return o+=r(e,"colspan"),a=l,o>n?!1:t}),a}function b(e,t,n,r){var l=p(o.dom.getParent(t,"td,th")),a=h(n,l),i=n.childNodes[a],c=u(i,r);f(c||i)}function v(e){var t=o.selection.getNode(),n=o.dom.getParent(t,"td,th"),r=o.dom.getParent(e,"td,th");return n&&n!==r&&w(n,r)}function w(e,t){return o.dom.getParent(e,"TABLE")===o.dom.getParent(t,"TABLE")}var x=n.keyCode;if(m()&&g(o)){var y=o.selection.getNode();setTimeout(function(){v(y)&&a(!n.shiftKey&&x===e.UP,y,n)},0)}}o.on("KeyDown",function(e){n(e)})}function i(){function e(e,t){var n=t.ownerDocument,o=n.createRange(),r;return o.setStartBefore(t),o.setEnd(e.endContainer,e.endOffset),r=n.createElement("body"),r.appendChild(o.cloneContents()),0===r.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}o.on("KeyDown",function(t){var n,r,l=o.dom;(37==t.keyCode||38==t.keyCode)&&(n=o.selection.getRng(),r=l.getParent(n.startContainer,"table"),r&&o.getBody().firstChild==r&&e(n,r)&&(n=l.createRng(),n.setStartBefore(r),n.setEndBefore(r),o.selection.setRng(n),t.preventDefault()))})}function c(){o.on("KeyDown SetContent VisualAid",function(){var e;for(e=o.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&!e.getAttribute("data-mce-bogus"))break;e&&"TABLE"==e.nodeName&&(o.settings.forced_root_block?o.dom.add(o.getBody(),o.settings.forced_root_block,null,n.ie?"&nbsp;":'<br data-mce-bogus="1" />'):o.dom.add(o.getBody(),"br",{"data-mce-bogus":"1"}))}),o.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||"\u00a0"==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&o.dom.remove(t)})}function s(){function e(e,t,n,o){var r=3,l=e.dom.getParent(t.startContainer,"TABLE"),a,i,c;return l&&(a=l.parentNode),i=t.startContainer.nodeType==r&&0===t.startOffset&&0===t.endOffset&&o&&("TR"==n.nodeName||n==a),c=("TD"==n.nodeName||"TH"==n.nodeName)&&!o,i||c}function t(){var t=o.selection.getRng(),n=o.selection.getNode(),r=o.dom.getParent(t.startContainer,"TD,TH");if(e(o,t,n,r)){r||(r=n);for(var l=r.lastChild;l.lastChild;)l=l.lastChild;t.setEnd(l,l.nodeValue.length),o.selection.setRng(t)}}o.on("KeyDown",function(){t()}),o.on("MouseDown",function(e){2!=e.button&&t()})}n.webkit&&(a(),s()),n.gecko&&(i(),c())}}),o(m,[c,g,s],function(e,n,o){return function(r){function l(){r.getBody().style.webkitUserSelect="",d&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),d=!1)}var a=r.dom,i,c,s,d=!0;return r.on("MouseDown",function(e){2!=e.button&&(l(),c=a.getParent(e.target,"td,th"),s=a.getParent(c,"table"))}),a.bind(r.getDoc(),"mouseover",function(t){var n,o,l=t.target;if(c&&(i||l!=c)&&("TD"==l.nodeName||"TH"==l.nodeName)){o=a.getParent(l,"table"),o==s&&(i||(i=new e(r.selection,o),i.setStartCell(c),r.getBody().style.webkitUserSelect="none"),i.setEndCell(l),d=!0),n=r.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(u){}t.preventDefault()}}),r.on("MouseUp",function(){function e(e,r){var a=new n(e,e);do{if(3==e.nodeType&&0!==o.trim(e.nodeValue).length)return r?l.setStart(e,0):l.setEnd(e,e.nodeValue.length),t;if("BR"==e.nodeName)return r?l.setStartBefore(e):l.setEndBefore(e),t}while(e=r?a.next():a.prev())}var l,d=r.selection,u,f,m,g,p;if(c){if(i&&(r.getBody().style.webkitUserSelect=""),u=a.select("td.mce-item-selected,th.mce-item-selected"),u.length>0){l=a.createRng(),m=u[0],p=u[u.length-1],l.setStartBefore(m),l.setEndAfter(m),e(m,1),f=new n(m,a.getParent(u[0],"table"));do if("TD"==m.nodeName||"TH"==m.nodeName){if(!a.hasClass(m,"mce-item-selected"))break;g=m}while(m=f.next());e(g),d.setRng(l)}r.nodeChanged(),c=i=s=null}}),r.on("KeyUp",function(){l()}),{clear:l}}}),o(p,[c,u,m,s,g,d,h],function(e,n,o,r,l,a,i){function c(r){function l(e){return e?e.replace(/px$/,""):""}function i(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function c(){var e=r.dom,t,n;t=r.dom.getParent(r.selection.getNode(),"table"),n={width:l(e.getStyle(t,"width")||e.getAttrib(t,"width")),height:l(e.getStyle(t,"height")||e.getAttrib(t,"height")),cellspacing:e.getAttrib(t,"cellspacing"),cellpadding:e.getAttrib(t,"cellpadding"),border:e.getAttrib(t,"border"),caption:!!e.select("caption",t)[0]},s("left center right".split(" "),function(e){r.formatter.matchNode(t,"align"+e)&&(n.align=e)}),r.windowManager.open({title:"Table properties",items:{type:"form",layout:"grid",columns:2,data:n,defaults:{type:"textbox",maxWidth:50},items:[{label:"Cols",name:"cols"},{label:"Rows",name:"rows"},{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Alignment",minWidth:90,name:"align",type:"listbox",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var n=this.toJSON(),o;r.undoManager.transact(function(){r.dom.setAttribs(t,{cellspacing:n.cellspacing,cellpadding:n.cellpadding,border:n.border}),r.dom.setStyles(t,{width:i(n.width),height:i(n.height)}),o=e.select("caption",t)[0],o&&!n.caption&&e.remove(o),!o&&n.caption&&(o=e.create("caption"),a.ie||(o.innerHTML='<br data-mce-bogus="1"/>'),t.insertBefore(o,t.firstChild)),n.align?r.formatter.apply("align"+n.align,{},t):s("left center right".split(" "),function(e){r.formatter.remove("align"+e,{},t)}),r.focus(),r.addVisual()})}})}function d(e,t){r.windowManager.open({title:"Merge cells",body:[{label:"Columns",name:"cols",type:"textbox",size:5},{label:"Rows",name:"rows",type:"textbox",size:5}],onsubmit:function(){var n=this.toJSON();r.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})}function u(){var e=r.dom,t,n,o=[];o=r.dom.select("td.mce-item-selected,th.mce-item-selected"),t=r.dom.getParent(r.selection.getNode(),"td,th"),!o.length&&t&&o.push(t),t=t||o[0],n={width:l(e.getStyle(t,"width")||e.getAttrib(t,"width")),height:l(e.getStyle(t,"height")||e.getAttrib(t,"height")),scope:e.getAttrib(t,"scope")},n.type=t.nodeName.toLowerCase(),s("left center right".split(" "),function(e){r.formatter.matchNode(t,"align"+e)&&(n.align=e)}),r.windowManager.open({title:"Cell properties",items:{type:"form",data:n,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,menu:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,menu:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var t=this.toJSON();r.undoManager.transact(function(){s(o,function(n){r.dom.setAttrib(n,"scope",t.scope),r.dom.setStyles(n,{width:i(t.width),height:i(t.height)}),t.type&&n.nodeName.toLowerCase()!=t.type&&(n=e.rename(n,t.type)),t.align?r.formatter.apply("align"+t.align,{},n):s("left center right".split(" "),function(e){r.formatter.remove("align"+e,{},n)})}),r.focus()})}})}function f(){var e=r.dom,n,o,a,c,d=[];n=r.dom.getParent(r.selection.getNode(),"table"),o=r.dom.getParent(r.selection.getNode(),"td,th"),s(n.rows,function(n){s(n.cells,function(r){return e.hasClass(r,"mce-item-selected")||r==o?(d.push(n),!1):t})}),a=d[0],c={height:l(e.getStyle(a,"height")||e.getAttrib(a,"height")),scope:e.getAttrib(a,"scope")},c.type=a.parentNode.nodeName.toLowerCase(),s("left center right".split(" "),function(e){r.formatter.matchNode(a,"align"+e)&&(c.align=e)}),r.windowManager.open({title:"Row properties",items:{type:"form",data:c,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,menu:[{text:"header",value:"thead"},{text:"body",value:"tbody"},{text:"footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,menu:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]},onsubmit:function(){var t=this.toJSON(),n,o,l;r.undoManager.transact(function(){s(d,function(a){r.dom.setAttrib(a,"scope",t.scope),r.dom.setStyles(a,{height:i(t.height)}),t.type!=a.parentNode.nodeName.toLowerCase()&&(n=e.getParent(a,"table"),o=a.parentNode,l=e.select(n,t.type)[0],l||(l=e.create(t.type),n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l)),l.insertBefore(a,l.firstChild),o.hasChildNodes()||e.remove(o)),t.align?r.formatter.apply("align"+t.align,{},a):s("left center right".split(" "),function(e){r.formatter.remove("align"+e,{},a)})}),r.focus()})}})}function m(e){return function(){r.execCommand(e)}}function g(e,t){var n,o,l;for(l="<table><tbody>",n=0;t>n;n++){for(l+="<tr>",o=0;e>o;o++)l+="<td>"+(a.ie?" ":"<br>")+"</td>";l+="</tr>"}l+="</tbody></table>",r.insertContent(l)}function p(){function e(){t.disabled(!r.dom.getParent(r.selection.getNode(),"table")),r.selection.selectorChanged("table",function(e){t.disabled(!e)})}var t=this;r.initialized?e():r.on("init",e)}function h(){var e="";e='<table role="presentation" class="mce-grid mce-grid-border">';for(var t=0;10>t;t++){e+="<tr>";for(var n=0;10>n;n++)e+='<td><a href="#" data-mce-index="'+n+","+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center">0 x 0</div>'}var b,v,w=this;s([["table","Insert/edit table","mceInsertTable"],["delete_table","Delete table","mceTableDelete"],["delete_col","Delete column","mceTableDeleteCol"],["delete_row","Delete row","mceTableDeleteRow"],["col_after","Insert column after","mceTableInsertColAfter"],["col_before","Insert column before","mceTableInsertColBefore"],["row_after","Insert row after","mceTableInsertRowAfter"],["row_before","Insert row before","mceTableInsertRowBefore"],["row_props","Row properties","mceTableRowProps"],["cell_props","Cell properties","mceTableCellProps"],["split_cells","Split cells","mceTableSplitCells"],["merge_cells","Merge cells","mceTableMergeCells"]],function(e){r.addButton(e[0],{title:e[1],cmd:e[2],onPostRender:p})}),r.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onhide:function(){r.dom.removeClass(this.menu.items()[0].getEl().getElementsByTagName("a"),"mce-active")},menu:[{type:"container",html:h(),onmousemove:function(e){var t=e.target;if("A"==t.nodeName){var n=r.dom.getParent(t,"table"),o=t.getAttribute("data-mce-index");if(o!=this.lastPos){o=o.split(","),o[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10);for(var l=0;10>l;l++)for(var a=0;10>a;a++)r.dom.toggleClass(n.rows[l].childNodes[a].firstChild,"mce-active",o[0]>=a&&o[1]>=l);n.nextSibling.innerHTML=o[0]+1+" x "+(o[1]+1),this.lastPos=o}}},onclick:function(e){"A"==e.target.nodeName&&this.lastPos&&(e.preventDefault(),g(this.lastPos[0]+1,this.lastPos[1]+1),this.parent().cancel())}}]}),r.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:p,onclick:c}),r.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:p,cmd:"mceTableDelete"}),r.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:p},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:p},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:p}]}),r.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:p},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:p},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:p},{text:"Row properties",onclick:m("mceTableRowProps"),onPostRender:p},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),onPostRender:p},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:p},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:p},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:p}]}),r.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:p},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:p},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:p}]}),a.isIE||r.on("click",function(e){e=e.target,"TABLE"===e.nodeName&&(r.selection.select(e),r.nodeChanged())}),w.quirks=new n(r),r.on("Init",function(){b=r.windowManager,w.cellSelection=new o(r)}),s({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t,n,o;o=r.dom.getParent(r.selection.getNode(),"th,td"),o&&(t=o.rowSpan,n=o.colSpan),r.dom.select("td.mce-item-selected,th.mce-item-selected").length?e.merge():d(e,o)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){v=e.cutRows()},mceTableCopyRow:function(e){v=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(v,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(v)},mceTableDelete:function(e){e.deleteTable()}},function(t,n){r.addCommand(n,function(){var n=new e(r.selection);n&&(t(n),r.execCommand("mceRepaint"),w.cellSelection.clear())})}),s({mceInsertTable:function(){c()},mceTableRowProps:f,mceTableCellProps:u},function(e,t){r.addCommand(t,function(t,n){e(n)})})}var s=r.each;i.add("table",c)}),a([c,u,m,p])})(this);