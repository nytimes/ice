tinymce.PluginManager.add("tabfocus",function(e){function t(e){9===e.keyCode&&e.preventDefault()}function n(t){function n(t){function n(e){return"BODY"===e.nodeName||"hidden"!=e.type&&"none"!=e.style.display&&"hidden"!=e.style.visibility&&n(e.parentNode)}function o(e){return e.attributes.tabIndex.specified||"INPUT"==e.nodeName||"TEXTAREA"==e.nodeName}function c(e){return!o(e)&&"-1"!=e.getAttribute("tabindex")&&n(e)}if(l=i.select(":input:enabled,*[tabindex]:not(iframe)"),a(l,function(t,n){return t.id==e.id?(r=n,!1):void 0}),t>0){for(s=r+1;l.length>s;s++)if(c(l[s]))return l[s]}else for(s=r-1;s>=0;s--)if(c(l[s]))return l[s];return null}var r,l,c,s;9===t.keyCode&&(c=o(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),1==c.length&&(c[1]=c[0],c[0]=":prev"),l=t.shiftKey?":prev"==c[0]?n(-1):i.get(c[0]):":next"==c[1]?n(1):i.get(c[1]),l&&(l.id&&(e=tinymce.get(l.id||l.name))?e.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus(),l.focus()},10),t.preventDefault()))}var i=tinymce.DOM,a=tinymce.each,o=tinymce.explode;e.on("keyup",t),tinymce.Env.gecko?e.on("keypress keydown",n):e.on("keydown",n)});